**Также известен как:** Self Encapsulate Field

>Самоинкапсуляция отличается от обычной [инкапсуляции поля](https://refactoring.guru/ru/encapsulate-field) тем, что рефакторинг производится над приватным полем.

### Проблема
Вы используете прямой доступ к приватным полями внутри класса.
```
class Range {
private:
	int low, high;

bublic:
  bool Includes(int arg) 
  {
    return arg >= low && arg <= high;
  }
}
```

### Решение
Создайте геттер и сеттер для поля, и пользуйтесь для доступа к полю только ими.
```
class Range {
private:
  int low, high;

public:
  int getLow() {
    return low;
  }
  
  int getHigh() {
    return high;
  }
  
  boolean includes(int arg) {
    return arg >= getLow() && arg <= getHigh();
  }
}
```

### Причины рефакторинга
Бывает так, что вам перестаёт хватать гибкости с прямым доступом к приватному полю внутри класса. Вы хотите иметь возможность инициализировать значение поля при первом запросе или производить какие-то операции над новыми значениями поля в момент присваивания, либо делать все это разными способами в подклассах.

### Достоинства
- _Непрямой доступ к полям_ — это когда работа с полем происходит через методы доступа (геттеры и сеттеры). Этот подход отличается гораздо большей гибкостью, чем _прямой доступ к полям_.
    
    - Во-первых, вы можете осуществлять сложные операции при получении или установке данных в поле. _Ленивая инициализация_, _валидация значений в поле_ — все это легко реализуемо внутри геттеров и сеттеров поля.
        
    - Во-вторых, что ещё важнее, вы можете переопределять геттеры и сеттеры в подклассах.
        
- Вы можете вообще не реализовывать сеттер для поля. Значение поля будет задаваться только в конструкторе, делая это поле неизменяемым для всего периода жизни объекта.

### Недостатки
Когда используется _прямой доступ к полям_, код выглядит проще и нагляднее, хотя и теряет в гибкости.

### Порядок рефакторинга
1. Создайте геттер (и опциональный сеттер) для поля. Они должны быть защищёнными (`protected`) либо публичными (`public`).
    
2. Найдите все прямые обращения к полю и замените их вызовами геттера и сеттера.

### Родственные рефакторинги
[Инкапсуляция поля](https://refactoring.guru/ru/encapsulate-field)

### Помогает рефакторингу
[Дублирование видимых данных](https://refactoring.guru/ru/duplicate-observed-data)
[Замена кодирования типа подклассами](https://refactoring.guru/ru/replace-type-code-with-subclasses)
[Замена кодирования типа состоянием/стратегией](https://refactoring.guru/ru/replace-type-code-with-state-strategy)