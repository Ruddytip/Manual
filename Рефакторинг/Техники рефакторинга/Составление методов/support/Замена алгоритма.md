**Также известен как:** Substitute Algorithm

### Проблема
Вы хотите заменить существующий алгоритм другим?
```
string FoundPerson(string[] people)
{
  for (int i = 0; i < people.Length; i++) {
    if (people[i].Equals("Don")) {
      return "Don";
    }
    if (people[i].Equals("John")) {
      return "John";
    }
    if (people[i].Equals("Kent")) {
      return "Kent";
    }
  }
  return String.Empty;
}
```

### Решение
Замените тело метода, реализующего старый алгоритм, новым алгоритмом.
```
string FoundPerson(string[] people)
{
  List<string> candidates = new List<string>() {"Don", "John", "Kent"};
  
  for (int i = 0; i < people.Length; i++) {
    if (candidates.Contains(people[i])) {
      return people[i];
    }
  }
  
  return String.Empty;
}
```

### Причины рефакторинга
1. Поэтапный рефакторинг — не единственный способ улучшить программу. Иногда вы сталкиваетесь с таким нагромождением проблем в методе, что его гораздо проще переписать заново. С другой стороны, вы могли найти алгоритм, который куда проще и эффективнее текущего. В этом случае надо просто заменить старый алгоритм новым.
    
2. С течением времени ваш алгоритм может оказаться включен в набор известной библиотеки или фреймворка, и вы можете пожелать избавиться от собственной реализации, чтобы облегчить себе поддержку программы.
    
3. Требования к работе программы могут измениться настолько сильно, что старый алгоритм невозможно просто «допилить» до соответствия им.

### Порядок рефакторинга
1. Убедитесь, что вы по максимуму упростили текущий алгоритм. Перенесите несущественный код в другие методы с помощью [извлечения метода](Извлечение%20метода.md). Чем меньше «движущихся частей» останется в исходном алгоритме, тем проще будет его заменить.
    
2. Создайте ваш новый алгоритм в новом методе. Замените старый алгоритм новым и запустите тесты программы.
    
3. Если результаты не сходятся, верните старую реализацию и сравните результаты. Выясните, почему результаты не совпадают. Нередко, причиной могут быть ошибки в старом алгоритме, но с большей вероятностью не работает что-то в новом.
    
4. Когда все тесты начнут проходить, окончательно удалите старый алгоритм.

### Борется с запахом
[Дублирование кода](Дублирование%20кода.md)
[Длинный метод](Длинный%20метод.md)